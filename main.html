<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FURSOY Browser</title>
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <div id="search-page">
        <h1 id="Search-Title">FURSOY Browser</h1>
        <input type="text" id="search-input" placeholder="Google'da ara...">
        <button id="search-btn">Ara</button>
    </div>

    <webview id="webview" src=""></webview>

    <!-- ðŸ”¹ GÃ¼ncelleme Bilgisi -->
    <div id="update-container" style="display: none;">
        GÃ¼ncelleme indiriliyor... <span id="update-percent">0%</span>
        <div id="update-progress-bar">
            <div id="update-progress-fill"></div>
        </div>
    </div>
    <div id="version-label">YÃ¼kleniyor...</div>


    <script>
        window.electronAPI.onUpdateProgress((percent) => {
            const container = document.getElementById('update-container');
            const percentText = document.getElementById('update-percent');
            const fill = document.getElementById('update-progress-fill');

            container.style.display = 'block';
            percentText.textContent = `${percent.toFixed(1)}%`;
            fill.style.width = `${percent}%`;

            if (percent >= 100) {
                container.textContent = "GÃ¼ncelleme indirildi! Yeniden baÅŸlatÄ±lÄ±yor...";
            }
        });

        document.addEventListener("DOMContentLoaded", () => {
            const searchBtn = document.getElementById("search-btn");
            const searchInput = document.getElementById("search-input");
            const webview = document.getElementById("webview");
            const searchPage = document.getElementById("search-page");
            const versionLabel = document.getElementById("version-label");

            // ðŸ”¹ Preload Ã¼zerinden versiyon bilgisi gÃ¶ster
            if (window.appInfo?.version) {
                versionLabel.textContent = `v${window.appInfo.version}`;
            }

            function search() {
                const query = searchInput.value.trim();
                if (!query) return;
                const searchUrl = `https://www.google.com/search?igu=1&q=${encodeURIComponent(query)}`;
                webview.src = searchUrl;
                searchPage.style.display = "none";
            }

            searchBtn.addEventListener("click", search);
            searchInput.addEventListener("keypress", e => {
                if (e.key === "Enter") search();
            });

            webview.addEventListener("did-finish-load", () => {
                webview.style.opacity = "1";
                webview.style.visibility = "visible";
            });
        });
    </script>
</body>

</html>